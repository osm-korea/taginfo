<div lang="en" dir="ltr">
    <h1>Tag links</h1>
    <p>The following keys support tag links, i.e. autogenerated links from tag
    values to. The regular expression must match for this to work.</p>
</div>
<div class="box" lang="en" dir="ltr">
    <table class="list">
        <thead><th>Key</th><th>Count</th><th>Unique values</th><th>Matching values</th><th>Regex</th><th>Links (simplified display)</th></thead>
        <tbody>
<% TAGLINKS.each_with_index do |(key, match), n| c = (n%2!=0) ? ' even' : '' %>
        <tr>
            <td class="<%= c %>"><a href="/keys/<%= h(key) %>"><%= h(key) %></a></td>
            <td class="tr<%= c %>"><%= @data[key]['count_all'].to_s_with_ts %></td>
            <td class="tr<%= c %>"><%= @data[key]['values_all'].to_s_with_ts %></td>
            <td class="tr<%= c %>"><%= @data[key]['values_match'].to_s_with_ts %> (<%= (@data[key]['values_match'] * 100 / @data[key]['values_all']).to_i %>%)</td>
            <td class="<%= c %>"><tt><%= h(match.regex.inspect[1..-2]) %></tt></td>
            <td class="<%= c %>"><ul class="reportlist"><%= @data[key]['links'].map{ |tl| '<li>' + h(tl.title) + ' &rarr; ' + h(tl.url) + '</li>' }.join %></ul></td>
        </tr>
<% end %>
        </tbody>
    </table>
</div>
